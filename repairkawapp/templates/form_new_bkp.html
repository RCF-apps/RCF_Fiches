{% extends "base.html" %}

{% block content %}
<form class="row gy-3 needs-validation" novalidate  method="POST" action="/new">
  <div class="row">
    <div class="col-8">
      <div class="input-group">
        <span class="input-group-text bg-secondary">Date</span>
        <input type="date" class="form-control" id="exampleFormControlInput1" name="date" value="{{today}}">
      </div>
      <div class="input-group input-group-wmarg">
        <span class="input-group-text bg-secondary">Nom</span>
        <input type="name" class="form-control" id="exampleFormControlInput1" name="name" placeholder="Nom (Prénom)" required>
        <div class="invalid-feedback">
          Nom obligatoire !
        </div>
      </div>
    </div>
    <div class="card col-4 update rounded age gx-0">
      <div class="card-header bg-secondary text-center card-header-wmarg">
        Tranche d'âge
      </div>
      <div class="card-body small card-body-wmarg">
        <div class="input-group input-group-sm">
          <div class="form-check form-check-inline form-check-inline-wmarg">
            <input class="form-check-input" type="radio" name="age" value="1">
            <label class="form-check-label" for="inlineRadio1">0-20</label>
          </div>
          <div class="form-check form-check-inline form-check-inline-wmarg">
            <input class="form-check-input" type="radio" name="age" value="2">
            <label class="form-check-label" for="inlineRadio2">21-40</label>
          </div>
          <div class="form-check form-check-inline form-check-inline-wmarg">
            <input class="form-check-input" type="radio" name="age" value="3">
            <label class="form-check-label" for="inlineRadio3">41-60</label>
          </div>
          <div class="form-check form-check-inline form-check-inline-wmarg">
            <input class="form-check-input" type="radio" name="age" value="4">
            <label class="form-check-label" for="inlineRadio3">61+</label>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="input-group">
    <span class="input-group-text bg-secondary">Email</span>
    <input type="email" class="form-control" id="exampleFormControlInput1" name="email" placeholder="name@example.com">
    <span class="input-group-text bg-secondary">Téléphone</span>
    <input type="text" class="form-control" id="exampleFormControlInput1" name="phone" placeholder="0612345678" oninput="check_phone(this)">
  </div>
  <div class="input-group">
    <div class="dropdown" id="categoryDropdown">
      <button class="btnCategory btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown">
        Catégorie
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu dropdown-category">
    {% for category in categories %}
        <li class="product-icon-{{category.rm_icon_id}}"><a class="dropdown-item" href="#" val={{category.id}}>{{category.name}}</a></li>
    {% endfor %}
      </ul>
    </div>
    <input class="form-control" style="display: none" id="category" name="category" required>
    <input class="form-control" id="exampleFormControlInput1" name="otype" placeholder="Type de l'objet" required>
    <div class="invalid-feedback">
        Type et Catégorie obligatoire !
    </div>
    <script>
      /* reloading the page remove the value */
      if ($("#category").val()) {
        $("#categoryDropdown button").text($("#categoryDropdown li a[val="+$("#category").val()+"]").text())
      }
    </script>
  </div>
  <div class="input-group">
        <span class="input-group-text bg-secondary" id="inputGroup-sizing-default">Marque</span>
        <input style="text-transform: uppercase;" type="text" id="brand" name="brand" class="form-control" required placeholder="LAMARQUE / INCONNU">
        <span class="input-group-text bg-secondary" id="inputGroup-sizing-default">Modèle</span>
        <input type="text" class="form-control" name="model">
  </div>
  <div class="input-group input-group-sm">
        <span class="input-group-text bg-secondary" id="inputGroup-sizing-default">SN</span>
        <input style="text-transform: uppercase;" type="text" id="brand" name="sn" class="form-control" placeholder="SERIAL NUMBER">
        <span class="input-group-text bg-secondary" id="inputGroup-sizing-default">Année</span>
        <input type="number" min="1950" max="{{current_year}}" step="1" name="year" class="form-control col-1">
        <span class="input-group-text bg-secondary" id="inputGroup-sizing-default">Valeur</span>
        <input type="number" min="5" name="value" class="form-control col-1">
        <span class="input-group-text bg-secondary" id="inputGroup-sizing-default">Poids</span>
        <input type="number" min="5" name="value" class="form-control col-1">
  </div>
  <!-- <div class="input-group">
    <span class="input-group-text bg-secondary" id="inputGroup-sizing-default">État Initial</span>
    <select class="form-select" name="initial_state" id="validationCustom04" required>
      <option selected disabled value="">Choisir...</option>
    {% for state in states %}
        <option value="{{state.id}}">{{state.label}}</option>
    {% endfor %}
    </select>
  </div> -->
  <div class="input-group justify-content-around repairstatus">
    <div class="card col-2 update rounded">
      <div class="card-header bg-secondary text-center">
        Etat Initial
      </div>
      <div class="card-body">
      </div>
    </div>
    <div class="card col-9 update rounded">
      <div class="card-header bg-secondary text-center">
        Problème
      </div>
      <div class="card-body card-body-textarea">
        <textarea class="form-control" name="description" required rows=4></textarea>
      </div>
    </div>
  </div>
  <div class="input-group">
      <span class="input-group-text bg-secondary">Accord Réglement Intérieur<br>Signature</span>
      <textarea class="form-control" name="description" required></textarea>
  </div>
  <div class="input-group justify-content-around repairstatus">
    <div class="card col-2 update rounded">
      <div class="card-header bg-secondary text-center">
        Réparateur
      </div>
      <div class="card-body">
      </div>
    </div>
    <div class="card col-7 update rounded">
      <div class="card-header bg-secondary text-center">
        Réparé
      </div>
      <div class="card-body">
        <div class="form-check">
          <input class="form-check-input" type="radio" name="repairstatus" id="repairstatus1">
          <label class="form-check-label" for="repairstatus1">
            Oui. Commentaire :
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="repairstatus" id="repairstatus2">
          <label class="form-check-label" for="repairstatus2">
            À moitié / Conseil...
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="repairstatus" id="repairstatus3">
          <label class="form-check-label" for="repairstatus3">
            Non. Raison :
          </label>
        </div>
      </div>
    </div>
    <div class="card col-2 update rounded">
      <div class="card-header bg-secondary text-center">
        Etat Final
      </div>
      <div class="card-body">
      </div>
    </div>
  </div>
  <div class="input-group">
      <span class="input-group-text bg-secondary">Don pour pièces détachées<br>Signature</span>
      <textarea class="form-control" name="description" required></textarea>
  </div>
  <div class="input-group">
      <span class="input-group-text bg-secondary">Photo</span>
      <input id="Picture" class="form-control" name="files[]" type="file" accept="image/*;capture=camera" multiple capture>
  </div>

  <div class="input-group">
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="validated" value="1" id="invalidCheck" required>
      <label class="form-check-label" for="invalidCheck">
        Accepter les conditions
      </label>
      <div class="invalid-feedback">
        Vous devez accepter avant de soumettre !
      </div>
    </div>
  </div>

  <div class="input-group">
    <button class="btn btn-success" type="submit">Envoyer</button>
  </div>
</form>

{% endblock %}